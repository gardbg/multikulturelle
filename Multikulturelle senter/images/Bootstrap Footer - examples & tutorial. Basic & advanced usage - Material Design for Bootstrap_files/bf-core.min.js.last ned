"use strict";function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();!function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"get",value:function(){return{personal:"_bfb",uuid:"_uuid",firstVisit:"_bffv",utm:"_bfu",referrer:"_bfr",label:"_bfl",modal:"_bfm",score:"_bfs",goal:"_bfk",event:"_bfe",startingPoint:"_bfy",subscribed:"_bfq",confirmedSubscribtion:"_bfo",fcm:"fcmInstanceId",push:{paths:"_bfps"}}}}]),e}(),t=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"get",value:function(){return{ip:"Ly9mcmVlZ2VvaXAubmV0L2pzb24v",visit:"aHR0cHM6Ly9zdjIuYnJhbmRmbG93Lm5ldDo4NDQzL2thZmthLXByb2R1Y2VyL3Jlc3QvdjIvdmlldy8=",goals:"aHR0cHM6Ly9zdjIuYnJhbmRmbG93Lm5ldDo4NDQzL2thZmthLXByb2R1Y2VyL3Jlc3QvdjIvZW50aXR5L2dvYWxzL2FkZA==",events:"aHR0cHM6Ly9zdjIuYnJhbmRmbG93Lm5ldDo4NDQzL2thZmthLXByb2R1Y2VyL3Jlc3QvdjIvZW50aXR5L2V2ZW50cy9hZGQ=",pushsubscribeadd:"aHR0cHM6Ly9zdjIuYnJhbmRmbG93Lm5ldDo4NDQzL2thZmthLXByb2R1Y2VyL3Jlc3QvdjIvZW50aXR5L3B1c2hzdWJzY3JpYmVhZGQvYWRk",unsubscribe:"aHR0cHM6Ly9zdjIuYnJhbmRmbG93Lm5ldDo4NDQzL2thZmthLXByb2R1Y2VyL3Jlc3QvdjIvdW5zdWJzY3JpYmUv",pushview:"aHR0cHM6Ly9zdjIuYnJhbmRmbG93Lm5ldDo4NDQzL2thZmthLXByb2R1Y2VyL3Jlc3QvdjIvZW50aXR5L3B1c2h2aWV3cy9hZGQ=",subscribe:"aHR0cHM6Ly9zdjIuYnJhbmRmbG93Lm5ldDo4NDQzL2thZmthLXByb2R1Y2VyL3Jlc3QvdjIvdW5zdWJzY3JpYmUvbWFpbHN1YnNjcmliZXJhZGQv"}}}]),e}(),r=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"get",value:function(){return{campaign:"u",medium:"v",content:"w",term:"x",source:"y",referrer:"z"}}}]),e}(),i=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"get",value:function(){return{ip:"i",geolocation:"l",latitude:"lt",longitude:"lg",country:"n",city:"c",os:"o",language:"g",resolution:"r",browser:"b",device:"d",name:"f",surname:"s",email:"e",timestamp:"t",utmCampaign:"u",utmMedium:"v",utmContent:"w",utmTerm:"x",utmSource:"y",utm_campaign:"u",utm_medium:"v",utm_content:"w",utm_term:"x",utm_source:"y",microGoal:"mc",referrer:"z",utmTimestamp:"t",uuid:"wi",registrationId:"ui",value:"vl",rowKey:"hb",event:{category:"ct",label:"lb",action:"ac"}}}}]),e}(),s=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"get",value:function(){return{subscribtion:{subscriber:"bfmi",confirmed:"bfSubscribtionConfirmed"},pushnotification:{hb:"pnhb",ts:"updateTs",id:"bfPnReportId"}}}}]),e}(),a=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"get",value:function(){return{mobile:"dm",tablet:"dt",desktop:"dd"}}}]),e}(),n=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"get",value:function(){return{undefined:"s0","16x16":"mE","42x11":"lk","32x32":"YF","40x30":"Ib","42x32":"a8","48x32":"HC","60x40":"GD","84x48":"0m","64x64":"W4","72x64":"yn","128x36":"h2","75x64":"tI","150x40":"yb","96x64":"3l","128x48":"Ej","96x65":"bk","102x64":"Cv","101x80":"R4","96x96":"aW","240x64":"Tr","160x102":"qX","128x128":"7L","160x120":"jX","160x144":"Gw","144x168":"2I","160x152":"JY","160x160":"lM","140x192":"Fu","160x200":"fl","224x144":"Fe","208x176":"ob","240x160":"dC","220x176":"pc","160x256":"Nq","208x208":"ql","256x192":"yW","280x192":"0p","256x212":"SL","432x128":"JQ","240x240":"Q0","320x192":"8W","320x200":"pn","256x256":"R7","320x208":"4h","320x224":"30","320x240":"Y1","320x256":"D4","376x240":"EH","272x340":"3E","400x240":"k0","320x320":"oj","432x240":"27","560x192":"I4","400x270":"wg","512x212":"c4","384x288":"qs","480x234":"mp","400x300":"n1","480x250":"B5","312x390":"CX","640x200":"ry","480x272":"0T","512x256":"I9","416x352":"i4","480x320":"45","640x240":"ro","640x256":"YM","512x342":"UX","800x240":"DH","512x384":"Qi","640x320":"Qt","640x350":"cf","640x360":"dq","480x500":"V1","720x348":"yj","720x350":"Yw","640x400":"vB","720x364":"Mx","800x352":"MW","600x480":"PQ","640x480":"aw","640x512":"LM","768x480":"tG","800x480":"aJ","848x480":"4M","854x480":"3U","800x600":"LT","960x540":"hd","832x624":"b6","960x544":"HU","1024x576":"jI","960x640":"Hm","1024x600":"uT","1024x640":"KG","960x720":"En","1136x640":"h8","1024x768":"NK","1024x800":"oB","1152x720":"cJ","1152x768":"ru","1280x720":"fM","1120x832":"FA","1280x768":"lX","1152x864":"ms","1334x750":"3k","1280x800":"hm","1152x900":"0j","1024x1024":"2G","1366x768":"u3","1280x854":"3c","1280x960":"Lq","1600x768":"ss","1080x1200":"O5","1440x900":"KO","1280x1024":"EJ","1440x960":"1d","1600x900":"tv","1400x1050":"EI","1440x1024":"QG","1440x1080":"FP","1600x1024":"2F","1680x1050":"Qd","1776x1000":"lx","1600x1200":"WV","1600x1280":"IT","1920x1080":"xO","1920x1200":"7r","2160x1080":"Gr","2048x1152":"w3","1792x1344":"HK","1920x1280":"Tl","1856x1392":"Yp","1800x1440":"kY","2880x900":"oN","2048x1280":"7i","1920x1400":"Vl","2436x1125":"3A","2538x1080":"PA","1920x1440":"fo","2560x1080":"qY","2160x1440":"Vs","2048x1536":"Bt","2304x1440":"sk","2256x1504":"lw","2560x1440":"pQ","2304x1728":"b9","2560x1600":"Ll","2880x1440":"Kn","2960x1440":"CH","2560x1700":"fj","2560x1800":"Hb","2880x1620":"r0","2560x1920":"Qx","3440x1440":"rM","2736x1824":"cR","2880x1800":"rc","2560x2048":"Yy","2732x2048":"6k","3200x1800":"mQ","2800x2100":"rP","3000x2000":"OC","3840x1600":"lc","3200x2048":"mV","3200x2400":"Sx","3840x2160":"as","4096x2160":"ke","3840x2400":"3N","5120x2160":"Ob","4096x3072":"IK","4500x3000":"8v","5120x2880":"6n","5120x3200":"PH","5120x4096":"iL","6400x4096":"lC","6400x4800":"cG","7680x4320":"72","7680x4800":"Rx","8192x4608":"q3","10240x4320":"s7","8192x8192":"g5"}}}]),e}(),o=function(){function e(){_classCallCheck(this,e),this.ua=navigator.userAgent,this.BROWSER={"Opera Mini":{s:"bF",r:/(opera\smini)\/([\w\.-]+)/i},"Opera Mobi":{s:"bE",r:/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i},"Opera > 9.80":{s:"bt",r:/(opera).+version\/([\w\.]+)/i},"Opera < 9.80":{s:"bt",r:/(opera)[\/\s]+([\w\.]+)/i},"Opera mini iOS":{s:"bF",r:/(opios)[\/\s]+([\w\.]+)/i},Kindle:{s:"bR",r:/(kindle)\/([\w\.]+)/i},Lunascape:{s:"bt",r:/(lunascape)[\/\s]?([\w\.]+)*/i},Maxthon:{s:"bv",r:/(maxthon)[\/\s]?([\w\.]+)*/i},Netfront:{s:"bA",r:/(netfront)[\/\s]?([\w\.]+)*/i},Jasmine:{s:"b<",r:/(jasmine)[\/\s]?([\w\.]+)*/i},Blazer:{s:"bU",r:/(blazer)[\/\s]?([\w\.]+)*/i},Avant:{s:"bc",r:/(avant\s)(?:browser)?[\/\s]?([\w\.]*)/i},IEMobile:{s:"bq",r:/(iemobile)(?:browser)?[\/\s]?([\w\.]*)/i},SlimBrowser:{s:"b^",r:/(slim)(?:browser)?[\/\s]?([\w\.]*)/i},Baidu:{s:"b8",r:/(baidu)(?:browser)?[\/\s]?([\w\.]*)/i},"Internet Explorer":{s:"b>",r:/(?:ms|\()(ie)\s([\w\.]+)/i},Rekonq:{s:"b(",r:/(rekonq)\/([\w\.]+)*/i},Chromium:{s:"bf",r:/(chromium)\/([\w\.-]+)/i},Flock:{s:"bl",r:/(flock)\/([\w\.-]+)/i},RockMelt:{s:"bH",r:/(rockmelt)\/([\w\.-]+)/i},Midori:{s:"bw",r:/(midori)\/([\w\.-]+)/i},Epiphany:{s:"b4",r:/(epiphany)\/([\w\.-]+)/i},Silk:{s:"bL",r:/(silk)\/([\w\.-]+)/i},Skyfire:{s:"bM",r:/(skyfire)\/([\w\.-]+)/i},OviBrowser:{s:"b=",r:/(ovibrowser)\/([\w\.-]+)/i},Bolt:{s:"b7",r:/(bolt)\/([\w\.-]+)/i},Iron:{s:"b.",r:/(iron)\/([\w\.-]+)/i},vivaldi:{s:"b`",r:/(vivaldi)\/([\w\.-]+)/i},Iridum:{s:"b/",r:/(iridium)\/([\w\.-]+)/i},PhantomJS:{s:"b_",r:/(phantomjs)\/([\w\.-]+)/i},Bowser:{s:"b6",r:/(bowser)\/([\w\.-]+)/i},IE11:{s:"br",r:/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i},"Microsoft Edge":{s:"b}",r:/(edge)\/((\d+)?[\w\.]+)/i},Yandex:{s:"b~",r:/(yabrowser)\/([\w\.]+)/i},Puffin:{s:"b)",r:/(puffin)\/([\w\.]+)/i},UCBrowser:{s:"bP",r:/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i},"Comodo Dragon":{s:"b1",r:/(comodo_dragon)\/([\w\.]+)/i},WeChat:{s:"b!",r:/(micromessenger)\/([\w\.]+)/i},"QQ, aka ShouQ":{s:"by",r:/(QQ)\/([\d\.]+)/i},QQBrowser:{s:"by",r:/m?(qqbrowser)[\/\s]?([\w\.]+)/i},"MIUI Browser":{s:"b;",r:/xiaomi\/miuibrowser\/([\w\.]+)/i},"Facebook App for iOS & Android":{s:"bx",r:/;fbav\/([\w\.]+);/i},"Chrome Headless":{s:"be",r:/headlesschrome(?:\/([\w\.]+)|\s)/i},"Chrome WebView":{s:"be",r:/\swv\).+(chrome)\/([\w\.]+)/i},Oculus:{s:"b+",r:/((?:oculus)browser)\/([\w\.]+)/i},"Samsung Browser":{s:"b*",r:/((?:samsung)browser)\/([\w\.]+)/i},"Android Browser":{s:"bh",r:/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i},Chrome:{s:"be",r:/(chrome)\/v?([\w\.]+)/i},OmniWeb:{s:"bC",r:/(omniweb)\/v?([\w\.]+)/i},Arora:{s:"bb",r:/(arora)\/v?([\w\.]+)/i},Tizen:{s:"b%",r:/(tizen\s?browser)\/v?([\w\.]+)/i},Nokia:{s:"b[",r:/(nokia\s?browser)\/v?([\w\.]+)/i},Dolphin:{s:"bz",r:/(dolfin)\/([\w\.]+)/i},"Chrome for Android / iOS":{s:"be",r:/((?:android.+)crmo|crios)\/([\w\.]+)/i},"Opera Coast":{s:"bt",r:/(coast)\/([\w\.]+)/i},"Firefox for iOS":{s:"bw",r:/fxios\/([\w\.-]+)/i},"Mobile Safari":{s:"bJ",r:/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i},"Safari & Safari Mobile":{s:"bJ",r:/version\/([\w\.]+).+?(mobile\s?safari|safari)/i},Konqueror:{s:"bs",r:/(konqueror)\/([\w\.]+)/i},Netscape:{s:"bB",r:/(navigator|netscape)\/([\w\.-]+)/i},Swiftfox:{s:"bO",r:/(swiftfox)/i},IceDragon:{s:"bq",r:/(icedragon)[\/\s]?([\w\.\+]+)/i},Iceweasel:{s:"bo",r:/(iceweasel)[\/\s]?([\w\.\+]+)/i},Camino:{s:"bd",r:/(camino)[\/\s]?([\w\.\+]+)/i},Chimera:{s:"b5",r:/(chimera)[\/\s]?([\w\.\+]+)/i},Fennec:{s:"bk",r:/(fennec)[\/\s]?([\w\.\+]+)/i},Maemo:{s:"b|",r:/(maemo\sbrowser)[\/\s]?([\w\.\+]+)/i},Minimo:{s:"bx",r:/(minimo)[\/\s]?([\w\.\+]+)/i},Conkeror:{s:"b0",r:/(conkeror)[\/\s]?([\w\.\+]+)/i},Firefox:{s:"bw",r:/(firefox)\/([\w\.-]+)/i},SeaMonkey:{s:"bK",r:/(seamonkey)\/([\w\.-]+)/i},"K-Meleon":{s:"br",r:/(k-meleon)\/([\w\.-]+)/i},IceCat:{s:"bn",r:/(icecat)\/([\w\.-]+)/i},IceApe:{s:"bm",r:/(iceape)\/([\w\.-]+)/i},Firebird:{s:"bv",r:/(firebird)\/([\w\.-]+)/i},Phoenix:{s:"b-",r:/(phoenix)\/([\w\.-]+)/i},Mozilla:{s:"bw",r:/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i},Polaris:{s:"bG",r:/(polaris)[\/\s]?([\w\.]+)/i},Lynx:{s:"bu",r:/(lynx)[\/\s]?([\w\.]+)/i},Dillo:{s:"bg",r:/(dillo)[\/\s]?([\w\.]+)/i},iCab:{s:"bp",r:/(icab)[\/\s]?([\w\.]+)/i},Doris:{s:"by",r:/(doris)[\/\s]?([\w\.]+)/i},Amaya:{s:"b9",r:/(amaya)[\/\s]?([\w\.]+)/i},NetSurf:{s:"b{",r:/(netsurf)[\/\s]?([\w\.]+)/i},Sleipnir:{s:"b&",r:/(sleipnir)[\/\s]?([\w\.]+)/i},Links:{s:"b,",r:/(links)\s\(([\w\.]+)/i},GoBrowser:{s:"bu",r:/(gobrowser)\/?([\w\.]+)*/i},"ICE Browser":{s:"bs",r:/(ice\s?browser)\/v?([\w\._]+)/i},Mosaic:{s:"b]",r:/(mosaic)[\/\s]([\w\.]+)/i}},this.OS={AIX:{s:"on",r:/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i},AmigaOS:{s:"o5",r:/(amigaos)/i},Android:{s:"of",r:/(android)[\/\s-]?([\w\.]+)*/i},Arch:{s:"oN",r:/((?=\s)arch)[\/\s-]?(?!chrom)([\w\.-]+)*/i},Bada:{s:"oC",r:/(bada)[\/\s-]?([\w\.]+)*/i},BeOS:{s:"o3",r:/(beos)/i},"BlackBerry 10":{s:"os",r:/\((bb)(10);/i},Blackberry:{s:"os",r:/(blackberry)\w*\/?([\w\.]+)*/i},CentOS:{s:"oR",r:/(centos)[\/\s-]?(?!chrom)([\w\.-]+)*/i},"Chromium OS":{s:"og",r:/(cros)\s[\w]+\s([\w\.]+\w)/i},Contiki:{s:"oE",r:/(contiki)[\/\s-]?([\w\.]+)*/i},Debian:{s:"ol",r:/(debian)[\/\s-]?(?!chrom)([\w\.-]+)*/i},DragonFly:{s:"oa",r:/\s(dragonfly)\s?([\w\.]+)*/i},Fedora:{s:"oP",r:/(fedora)[\/\s-]?(?!chrom)([\w\.-]+)*/i},"Firefox OS":{s:"oH",r:/mozilla.+\(mobile;.+gecko.+firefox/i},FreeBSD:{s:"oi",r:/\s(freebsd)\s?([\w\.]+)*/i},GNU:{s:"oX",r:/(gnu)\s?([\w\.]+)*/i},Gentoo:{s:"oM",r:/(gentoo)[\/\s-]?(?!chrom)([\w\.-]+)*/i},Haiku:{s:"oc",r:/(haiku)\s(\w+)/i},Hurd:{s:"oW",r:/(hurd)\s?([\w\.]+)*/i},Joli:{s:"oK",r:/(joli)[\/\s-]?(?!chrom)([\w\.-]+)*/i},Linpus:{s:"oV",r:/(linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i},Linux:{s:"od",r:/(linux)\s?([\w\.]+)*/i},"Mac OS1":{s:"om",r:/(mac\sos\sx)\s?([\w\s\.]+\w)*/i},"Mac OS2":{s:"ox",r:/(macintosh|mac(?=_powerpc)\s)/i},Mageia:{s:"oI",r:/(mageia)[;\s]/i},Mandriva:{s:"oQ",r:/(mandriva)[\/\s-]?(?!chrom)([\w\.-]+)*/i},MeeGo:{s:"oD",r:/(meego)[\/\s-]?([\w\.]+)*/i},Minix:{s:"o2",r:/(minix)/i},Mint:{s:"oo",r:/(mint)[\/\s\(]?(\w+)*/i},MorphOS:{s:"o6",r:/(morphos)/i},NetBSD:{s:"oY",r:/\s(netbsd)\s?([\w\.]+)*/i},Nintendo:{s:"ou",r:/(nintendo)\s([wids34portablevu]+)/i},OS2:{s:"o4",r:/(os\/2)/i},OpenBSD:{s:"oj",r:/\s(openbsd)\s?([\w\.]+)*/i},OpenVMS:{s:"o8",r:/(openvms)/i},"PC-BSD":{s:"oZ",r:/\s(pcbsd)\s?([\w\.]+)*/i},PCLinuxOS:{s:"oS",r:/(pclinuxos)[\/\s-]?(?!chrom)([\w\.-]+)*/i},Palm:{s:"oA",r:/(palm\sos)[\/\s-]?([\w\.]+)*/i},Plan9:{s:"o1",r:/(plan\s9)/i},Playstation:{s:"ow",r:/(playstation)\s([wids34portablevu]+)/i},QNX:{s:"oB",r:/(qnx)[\/\s-]?([\w\.]+)*/i},RIM:{s:"or",r:/(rim\stablet\sos)[\/\s-]?([\w\.]+)*/i},RISCOS:{s:"o7",r:/(risc\sos)/i},RedHat:{s:"oT",r:/(redhat)[\/\s-]?(?!chrom)([\w\.-]+)*/i},SUSE:{s:"oL",r:/([open]*suse)[\/\s-]?(?!chrom)([\w\.-]+)*/i},"Sailfish OS":{s:"oF",r:/linux;.+(sailfish);/i},"Series 40":{s:"oG",r:/\((series40);/i},Slackware:{s:"oO",r:/(slackware)[\/\s-]?(?!chrom)([\w\.-]+)*/i},Solaris1:{s:"oz",r:/(sunos)\s?([\w\.]+\d)*/i},Solaris2:{s:"o0",r:/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i},Symbian:{s:"op",r:/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i},Tizen:{s:"oq",r:/(tizen)[\/\s]([\w\.]+)/i},Ubuntu:{s:"oh",r:/([kxln]?ubuntu)[\/\s-]?(?!chrom)([\w\.-]+)*/i},Unix:{s:"o9",r:/(unix)\s?([\w\.]+)*/i},VectorLinux:{s:"oJ",r:/(vectorlinux)[;\s]/i},WebOS:{s:"ov",r:/(webos)[\/\s-]?([\w\.]+)*/i},Windows:{s:"ob",r:/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i},"Windows (iTunes)":{s:"ob",r:/microsoft\s(windows)\s(vista|xp)/i},"Windows Mobile":{s:"oy",r:/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i},"Windows Phone":{s:"ot",r:/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i},"Windows RT":{s:"ob",r:/(windows)\snt\s6\.2;\s(arm)/i},Zenwalk:{s:"oU",r:/(zenwalk)[\/\s-]?(?!chrom)([\w\.-]+)*/i},iOS:{s:"oe",r:/cfnetwork\/.+darwin/i}}}return _createClass(e,[{key:"get",value:function(e,t){try{if(!this.ua)throw new Error("Cannot read user agent.");var r=this[e.toUpperCase()];if(!["name","shortcut"].includes(t))throw new Error("Asking for invalid property: "+t+". Only: name and shortcut are valid properties.");if(!Object.keys(r).length)throw new ReferenceError("OS / Browser supported only.");for(var i in r){if(r[i].r.test(this.ua))return"shortcut"===t?r[i].s:i}return"shortcut"===t?e.charAt(0).toLowerCase()+"a":"undefined"}catch(r){return d.warning("parse "+t+" of "+e,r.message),null}}}]),e}(),u=function(){function e(t,r){_classCallCheck(this,e),this.conditions=t,this.wanted=t.find(function(e){return e.type.includes(r)}),this.other=t.filter(function(e){return!e.type.includes(r)});var i=t.find(function(e){return"delay"===e.type});this.timeout=i?1e3*+i.param:null}return _createClass(e,[{key:"if",value:function(){var e=!0,t=!0,r=!1,i=void 0;try{for(var s,a=this.other[Symbol.iterator]();!(t=(s=a.next()).done);t=!0){var n=s.value;if(!(e=e&&this.single(n)))return!1}}catch(e){r=!0,i=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw i}}return!0}},{key:"single",value:function(e){return this[e.type](e)}},{key:"score",value:function(e){var t=JSON.parse(d.readUserData(d.TRACK.score));return!!t[e.bfid]&&t[e.bfid]>=e.param}},{key:"label",value:function(e){var t=d.readUserData(d.TRACK.label);if("has"===e.operator){if(t&&(t=JSON.parse(t))[e.param]){var r=+t[e.param].a,i=+t[e.param].r;if(isNaN(i)&&r)return!0;if(!isNaN(i)&&i<r)return!0}}else if("hasNot"===e.operator){if(!t)return!0;if(!(t=JSON.parse(t))[e.param])return!0;var s=+t[e.param].a,a=+t[e.param].r;if(!isNaN(a)&&!isNaN(s)&&a>s)return!0}return!1}},{key:"path",value:function(e){return this.location(e)}},{key:"url",value:function(e){return this.location(e)}},{key:"location",value:function(e){var t=e.operator,r=window.location["path"===e.type?"pathname":"href"],i="equals"===t&&r===e.param,s="contains"===t&&r.includes(e.param),a="starts_with"===t&&r.startsWith(e.param),n="ends_with"===t&&r.endsWith(e.param),o="not_equals"===t&&r!==e.param,u="not_contain"===t&&!r.includes(e.param);return i||s||a||n||o||u}},{key:"delay",value:function(e){return!0}},{key:"utm_campaign",value:function(e){return this.utm(e)}},{key:"utm_content",value:function(e){return this.utm(e)}},{key:"utm_medium",value:function(e){return this.utm(e)}},{key:"utm_source",value:function(e){return this.utm(e)}},{key:"utm_term",value:function(e){return this.utm(e)}},{key:"utm",value:function(e){var t=d.readUserData(d.TRACK.utm);if(!t)return!1;t=JSON.parse(t);var r=d.HB[e.type],i=e.param,s=e.operator;for(var a in t){var n=t[a][r];if(n){if("equals"===s&&n===i||"contains"===s&&n.includes(i)||"not_equals"===s&&n!==i||"not_contain"===s&&!n.includes(i)||"starts_with"===s&&n.startsWith(i)||"ends_with"===s&&n.endsWith(i))return!0}}return!1}},{key:"referrer",value:function(e){var t=d.readUserData(d.TRACK.referrer);if(!t)return!1;t=JSON.parse(t);e.param;var r=e.operator;return t.some(function(e){for(var t in e){var i=e[t],s="equals"===r&&i===value,a="contains"===r&&i.includes(value),n="not_equals"===r&&i!==value,o="not_contain"===r&&!i.includes(value),u="starts_with"===r&&i.startsWith(value),c="ends_with"===r&&i.endsWith(value);return s||a||n||o||u||c}})}},{key:"modal",value:function(e){var t=JSON.parse(d.readUserData(d.TRACK.modal)||d.emptyObject);return"seen"===e.operator&&t[e.param]||"notSeen"===e.operator&&!t[e.param]}},{key:"goal",value:function(e){var t=JSON.parse(d.readUserData(d.TRACK.goal)||d.emptyObject);return"scored"===e.operator&&t.includes(e.param)||"notScored"===e.operator&&!t.includes(e.param)}}]),e}(),c=function(){function e(t){_classCallCheck(this,e),this.tag=t[0],this.type=this.tag.type}return _createClass(e,[{key:"call",value:function(){return this[this.type](this.tag)}},{key:"label",value:function(e){var t=JSON.parse(d.readUserData(d.TRACK.label)||d.emptyObject);t[e.bfid]=t[e.bfid]?t[e.bfid]:{},t[e.bfid]["add"===e.action?"a":"r"]=Date.now(),d.setUserData(d.TRACK.label,JSON.stringify(t))}},{key:"score",value:function(e){var t=JSON.parse(d.readUserData(d.TRACK.score)||d.emptyObject);"number"==typeof t[e.bfid]&&(t[e.bfid]+=+e.value,d.setUserData(d.TRACK.score,JSON.stringify(t)))}},{key:"scoreStart",value:function(e){var t=JSON.parse(d.readUserData(d.TRACK.score)||d.emptyObject);t[e.bfid]||(t[e.bfid]=0,d.setUserData(d.TRACK.score,JSON.stringify(t)))}},{key:"modal",value:function(e){if(e.status&&d.noModalVisible){var t=document.getElementById(d.modalswrap).querySelector("[data-bfmodal='"+e.bfid+"']");try{var r=jQuery(t);e.lists&&e.lists.length&&(t.dataset.lists=e.lists);var i=JSON.parse(d.readUserData(d.TRACK.modal)||d.emptyObject);"once"===e.frequency?i[e.bfid]||(r.modal("show"),i[e.bfid]=Date.now(),d.setUserData(d.TRACK.modal,JSON.stringify(i))):"unlimited"===e.frequency&&(r.modal("show"),i[e.bfid]=Date.now(),d.setUserData(d.TRACK.modal,JSON.stringify(i)))}catch(e){e instanceof ReferenceError&&d.warning("display modal tag",e.message)}}}},{key:"dynamicContent",value:function(e){var t=document.getElementById(e.id);t&&(t.innerHTML=d.dynamicContentsHTML[e.bfid],e.newsletter&&(t.dataset.lists=e.lists,t.dataset.bfNewsletter="wrapper",t.setAttribute("data-bf-newsletter","wrapper")))}},{key:"pushNode",value:function(e){d.waitForPushInit(function(e,t){if(t&&t.fcmInstanceId){var r=void 0,i=!0,s=t.fcmInstanceId;if(void 0!==e){if(r=JSON.parse(d.readUserData(d.TRACK.push.paths)||d.emptyArray),"add"===e.action){if(r.includes(e.path))return;r.push(e.path)}else{i=r.length!==(r=r.filter(function(t){return t!==e.path})).length}d.setUserData(d.TRACK.push.paths,JSON.stringify(r))}if(i){var a=null;"add"===e.action?(a={container:d.container,worm:d._generateHbaseWorm(),ts:Date.now(),p:window.location.pathname,meta:[],fcm:{id:s,path:e.path}},d.reportEntity(d.URL("pushsubscribeadd"),a)):(a="id="+s+"&path="+e.path+"&",d.reportView("pushsubscribe"+e.action,a,"unsubscribe"))}}}.bind(this,e))}},{key:"pushSegment",value:function(e){}},{key:"goal",value:function(e){var t=d.readUserData(d.TRACK.goal);if((!t||!t.includes(e.bfid))&&(t=t?JSON.parse(t):[],this.reportGoal(e),t.push(e.bfid),d.setUserData(d.TRACK.goal,JSON.stringify(t)),e.starting_point)){var r=JSON.parse(d.readUserData(d.TRACK.startingPoint)||d.emptyObject);r[e.bfid]=Date.now(),d.setUserData(d.TRACK.startingPoint,JSON.stringify(r))}}},{key:"reportGoal",value:function(e){var t,r={container:d.container,worm:d._generateHbaseWorm(),ts:Date.now(),p:window.location.pathname,meta:[],goal:(t={},_defineProperty(t,d.HB.uuid,d.readUserData(d.TRACK.uuid)),_defineProperty(t,d.HB.value,e.vl||"0.00"),_defineProperty(t,d.HB.rowKey,e.parent?e.parent:e.bfid),_defineProperty(t,d.HB.microGoal,e.parent?e.bfid:""),t)};d.reportEntity(d.URL("goals"),r)}},{key:"event",value:function(e){var t=JSON.parse(d.readUserData(d.TRACK.event)||d.emptyObject);t[e.bfid]?(t[e.bfid].a+=1,t[e.bfid].l=Date.now()):t[e.bfid]={a:1,l:Date.now()},d.setUserData(d.TRACK.event,JSON.stringify(t)),this.reportEvent(e)}},{key:"reportEvent",value:function(e){var t,r={container:d.container,worm:d._generateHbaseWorm(),ts:Date.now(),meta:[],p:window.location.pathname,event:(t={},_defineProperty(t,d.HB.event.category,e.ct),_defineProperty(t,d.HB.event.label,e.lb),_defineProperty(t,d.HB.event.action,e.ac),_defineProperty(t,d.HB.value,e.vl||"0.00"),_defineProperty(t,d.HB.rowKey,e.bfid),_defineProperty(t,d.HB.uuid,d.readUserData(d.TRACK.uuid)),t)};d.reportEntity(d.URL("events"),r)}}]),e}(),l=function(){function e(t,r){_classCallCheck(this,e),this.type="",this.index=r;var i={},s=!1;t.conditions.forEach(function(e){i[e.type]=i[e.type]?i[e.type]+1:1,"exitIntend"===e.param&&(s=!0)});var a=i.scoll_id||i.scoll_class||i.scroll_percentage,n=i.click_id||i.click_class,o=i.inactive,l=i.form_id||i.form_class;this.type=a?"scroll":n?"click":o?"inactive":l?"form":s?"exit":"standard",this.tags=new c(t.tags),this.conditions=new u(t.conditions,this.type)}return _createClass(e,[{key:"create",value:function(){return this[this.type]()}},{key:"scroll",value:function(){"scroll_percentage"===this.conditions.wanted.type?this.scrollPercentage():this.scrollToElement()}},{key:"scrollPercentage",value:function(){var e=this,t=d.scrollings.push(1)-1,r=+this.conditions.wanted.param;window.addEventListener("scroll",function(i){var s=document,a=window,n=void 0!==a.pageYOffset?a.pageYOffset:(s.documentElement||s.body.parentNode||s.body).scrollTop,o=Math.round(n/(s.body.clientHeight-a.outerHeight)*100);d.scrollings[t]&&o>=r&&(e.standard(),d.scrollings[t]=0)})}},{key:"scrollToElement",value:function(){var e=this;this.$().forEach(function(t){var r=d.scrollings.push(1)-1;window.addEventListener("scroll",function(i){d.scrollings[r]&&e.position(t)>0&&(e.standard(),d.scrollings[r]=0)})})}},{key:"position",value:function(e){return window.scrollY+window.innerHeight-(e.offsetTop+e.clientTop)}},{key:"click",value:function(){return this.cs()}},{key:"form",value:function(){return this.cs()}},{key:"cs",value:function(){var e=this,t=this.conditions.wanted.type.includes("click")?"click":"submit",r=this.conditions.wanted.param,i=this.conditions.wanted.operator;document.addEventListener(t,function(t){var s=!1;if(e.conditions.wanted.type.includes("id")){var a=t.target.id.toString().trim();s=a&&("not_equals"===i&&a!==r||"not_contain"===i&&!a.includes(r)||"equals"===i&&a===r||"contains"===i&&a.includes(r)||"starts_with"===i&&a.startsWith(r)||"ends_with"===i&&a.endsWith(r))}else{var n=t.target.className.split(" ").filter(function(e){return e.length>0});s=n.length&&("not_equals"===i&&!n.includes(r)||"not_contain"===i&&!n.some(function(e){return e.includes(r)})||"equals"===i&&n.includes(r)||"contains"===i&&n.some(function(e){return e.includes(r)})||"starts_with"===i&&n.some(function(e){return e.startsWith(r)})||"ends_with"===i&&n.some(function(e){return e.endsWith(r)}))}s&&e.standard()})}},{key:"inactive",value:function(){var e=this,t=d.idles.length-1;d.idles.push(0),["click","keypress","mousemove"].forEach(function(e){document.addEventListener(e,function(e){d.idles[t]=0})}),d.intervals[t]=setInterval(function(){d.idles[t]++,d.idles[t]===e.conditions.wanted.param&&(e.standard(),clearInterval(d.intervals[t]))},1e3)}},{key:"exit",value:function(){var e=this;document.addEventListener("mouseout",function(t){if("input"!=(t=t||window.event).target.tagName.toLowerCase()){var r=Math.max(document.documentElement.clientWidth,window.innerWidth||0);if(!(t.clientX>=r-50||t.clientY>=50)){t.relatedTarget||t.toElement||e.standard()}}})}},{key:"standard",value:function(){var e=this;this.conditions.if()&&(this.conditions.timeout?setTimeout(function(){e.tags.call()},this.conditions.timeout):this.tags.call())}},{key:"$",value:function(){var e=this.conditions.wanted,t=e.type.includes("id")?"id":"class",r=(e.operator,"["+t+cssAttrSelector+"='"+e.param+"']");return document.querySelectorAll(r)}}]),e}(),d=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"track",value:function(){this.setGlobals(),this.saveWormReferrer(),this.expireTrackingProperties(),this.removeInactiveProperties(),this.setScore(),this.setVisit(),this.reportPushNotificationView(),this.reportView("pageviews"),this.expireGoals()}},{key:"setGlobals",value:function(){this.isStorageAvailable=this.storageAvailable(),this.currentUtms=this.setUtms(),this.hasUTM="{}"!==JSON.stringify(this.currentUtms),this.newWorm=!this.readUserData(this.TRACK.uuid),this.ts=Date.now(),this.isLaterEnough=this.checkLastUTMSVisit()}},{key:"storageAvailable",value:function(){try{var e=window.localStorage,t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&0!==storage.length}}},{key:"setScore",value:function(){this.readUserData(this.TRACK.score)||this.setUserData(this.TRACK.score,JSON.stringify({}))}},{key:"setVisit",value:function(){this[!!this.newWorm?"setFirstVisit":"updateUserDataIfMissing"](),this.setUTMVisit()}},{key:"setFirstVisit",value:function(){var e=this,t=this._generateUUID();this.setUserData(this.TRACK.uuid,t),this.setUserData(this.TRACK.firstVisit,""+this.ts),this.saveWormPersonal(null);this.URL("ip");var r={method:"GET",url:this.URL("ip"),data:{},headers:[{name:"Accept",value:"application/json"}],callback:function(t){e.saveWormPersonal(t),e.reportView("uniqueusers")}};this.ajax(r)}},{key:"updateUserDataIfMissing",value:function(){var e=this,t=JSON.parse(localStorage.getItem(this.TRACK.personal)||this.emptyObject);if(this.saveWormPersonal(null),t[this.HB.browser]&&0!==t[this.HB.browser].indexOf("b")){var r={method:"GET",url:this.URL("ip"),data:{},headers:[{name:"Accept",value:"application/json"}],callback:function(t){e.saveWormPersonal(t)}};this.ajax(r)}}},{key:"setUTMVisit",value:function(){this.hasUTM&&(this.reportView("utmentry"),this.isLaterEnough&&this.saveWormUTM())}},{key:"warning",value:function(e,t){var r="\nBRANDFLOW: An error occured while trying to "+e+". \nMESSAGE  : "+t;console.warn(r)}},{key:"saveWormReferrer",value:function(){var e=this.extractDomain(document.referrer)+"/";if(!document.URL.includes(e)){var t=JSON.parse(this.readUserData(this.TRACK.referrer)||this.emptyArray);t.length===this.MAXIMUM_TRACKED_AMOUNT&&t.shift(),t.push(_defineProperty({},this.ts,e)),this.setUserData(this.TRACK.referrer,JSON.stringify(t))}}},{key:"saveWormUTM",value:function(){if(this.hasUTM){var e=JSON.parse(this.readUserData(this.TRACK.utm)||this.emptyObject),t=0,r=9999999999999;for(var i in e)i<r&&(r=i),t++;t===this.MAXIMUM_TRACKED_AMOUNT&&delete e[r],e[this.ts]=this.currentUtms,this.setUserData(this.TRACK.utm,JSON.stringify(e))}}},{key:"saveWormPersonal",value:function(e){var t;e=JSON.parse(e||this.emptyObject);var r=_extends((t={},_defineProperty(t,this.TRACK.os,this._getOS()),_defineProperty(t,this.TRACK.language,this._getLang()),_defineProperty(t,this.TRACK.device,this._getDevice()),_defineProperty(t,this.TRACK.browser,this._getBrowser()),_defineProperty(t,this.TRACK.resolution,this._getResolution()),_defineProperty(t,this.TRACK.timestamp,this.ts),t),e.ip&&_defineProperty({},this.TRACK.ip,e.ip),e.country_code&&_defineProperty({},this.TRACK.country,e.country_code),e.city&&_defineProperty({},this.TRACK.city,e.city),e.latitude&&_defineProperty({},this.TRACK.latitude,e.latitude),e.longitude&&_defineProperty({},this.TRACK.longitude,e.longitude),e.name&&_defineProperty({},this.TRACK.name,e.name),e.surname&&_defineProperty({},this.TRACK.surname,e.surname),e.email&&_defineProperty({},this.TRACK.email,e.email));this.setUserData(this.TRACK.personal,JSON.stringify(r))}},{key:"removeInactiveProperties",value:function(){this.removeInactiveProperty(this.TRACK.event,"events"),this.removeInactiveProperty(this.TRACK.label,"labels"),this.removeInactiveProperty(this.TRACK.score,"scores"),this.removeInactiveProperty(this.TRACK.modal,"modals"),this.removeInactiveGoals(),this.removeInactivePushNodes()}},{key:"removeInactiveProperty",value:function(e,t){var r=this.readUserData(e);r&&(r=JSON.parse(r),this.inactive[t].forEach(function(e){r[e]&&delete r[e]}),this.setUserData(e,JSON.stringify(r)))}},{key:"removeInactiveGoals",value:function(){var e=this.readUserData(this.TRACK.goal);if(e){for(var t=(e=JSON.parse(e)).length;t--;){var r=e[t];this.inactive.goals.includes(r)&&e.splice(t,1)}this.setUserData(this.TRACK.goal,JSON.stringify(e))}}},{key:"removeInactivePushNodes",value:function(){var t=this.readUserData(this.TRACK.push.paths);t&&(t=JSON.parse(t),this.inactive.nodes.forEach(function(r){if(t.includes(r)){e.reportView("pushsubscriberemove","path="+r+"&","unsubscribe"),delete t[r]}}),this.setUserData(name,JSON.stringify(t)))}},{key:"waitForPushInit",value:function(e){var t=1,r=setInterval(function(){if(window.hasOwnProperty("BFNotifications")&&""!==window.BFNotifications.fcmInstanceId)return clearInterval(r),void e(window.BFNotifications);++t>=10&&(clearInterval(r),e(!1))},200)}},{key:"createCookie",value:function(e,t,r){document.cookie=e+"="+t+(r?"; expires="+new Date(Date.now()+24*r*60*60*1e3).toUTCString():"")+"; path=/"}},{key:"eraseCookie",value:function(e){this.createCookie(e,"",-1)}},{key:"readCookie",value:function(e){e+="=";return decodeURIComponent(document.cookie).split(";").forEach(function(t){if(t.replace(/\s+/,"").includes(e))return t.substring(e.length)}),null}},{key:"readUserData",value:function(e){return this.isStorageAvailable?localStorage.getItem(e):this.readCookie(e)}},{key:"setUserData",value:function(e,t){this.isStorageAvailable?localStorage.setItem(e,t):this.createCookie(e,t)}},{key:"eraseUserData",value:function(e){this.isStorageAvailable?localStorage.removeItem(e):this.eraseCookie(e)}},{key:"getParameterByName",value:function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null}},{key:"extractDomain",value:function(e){return e.substring(e.includes("://")?e.indexOf("://")+3:0).replace(/\/$/,"").split(":")[0]}},{key:"expireTrackingProperties",value:function(){var e=this.readUserData(this.TRACK.utm);if(e){e=JSON.parse(e);for(var t in e)+this.ts-+t>this.MAXIMUM_UTM_TIME&&delete e[t];this.setUserData(this.TRACK.utm,JSON.stringify(e))}}},{key:"expireGoals",value:function(){var e=this.macro,t=Date.now(),r=JSON.parse(this.readUserData(this.TRACK.goal)||this.emptyArray),i=JSON.parse(this.readUserData(this.TRACK.startingPoint)||this.emptyObject);e.forEach(function(e){var s=!!e.startBfid,a=!!i[e.startBfid],n=!r.includes(e.bfid),o=!!e.expire,u=t-+i[e.startBfid]>=864e5*+e.expire;s&&a&&n&&o&&u&&r.push(e.bfid)}),this.setUserData(this.TRACK.goal,JSON.stringify(r))}},{key:"checkLastUTMSVisit",value:function(){var e=this.currentUtms[this.HB.utmCampaign],t=this.readUserData(this.TRACK.utm);if(!t)return!0;t=JSON.parse(t);for(var r in t){var i=!!t[r][this.HB.utmCampaign],s=t[r][this.HB.utmCampaign]===e,a=this.ts-r<6e5;if(i&&s&&a)return!1}return!0}},{key:"setUtms",value:function(){var e={};for(var t in this.UTMS){var r=this.getParameterByName("utm_"+t);r&&(e[this.UTMS[t]]=r)}return e}},{key:"_readPersonal",value:function(e){var t;e=JSON.parse(e||this.emptyObject);var r=this.readUserData("name"),i=this.readUserData("surname"),s=this.readUserData("email");return _extends((t={},_defineProperty(t,this.HB.os,this._getOS()),_defineProperty(t,this.HB.browser,this._getBrowser()),_defineProperty(t,this.HB.language,this._getLang()),_defineProperty(t,this.HB.device,this._getDevice()),_defineProperty(t,this.HB.resolution,this._getResolution()),t),r&&_defineProperty({},this.HB.name,r),s&&_defineProperty({},this.HB.email,s),i&&_defineProperty({},this.HB.surname,i),e.ip&&_defineProperty({},this.HB.ip,e.ip),e.city&&_defineProperty({},this.HB.city,e.city),e.latitude&&_defineProperty({},this.HB.latitude,e.latitude),e.longitude&&_defineProperty({},this.HB.longitude,e.longitude),e.country_code&&_defineProperty({},this.HB.country,e.country_code))}},{key:"_generateUUID",value:function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?r:3&r|8).toString(16)})}},{key:"_generateHbaseWorm",value:function(){return e.readUserData(e.TRACK.uuid).replace("-","").substr(0,10)}},{key:"_getPosition",value:function(e){return window.scrollY+window.innerHeight-(e.offsetTop+e.clientTop)}},{key:"_getOS",value:function(){return(new o).get("os","shortcut")}},{key:"_getBrowser",value:function(){return(new o).get("browser","shortcut")}},{key:"_getLang",value:function(){return navigator.language||"00"}},{key:"_getDevice",value:function(){return/Mobi/.test(navigator.userAgent)?this.devices.mobile:/Tablet|iPad/i.test(navigator.userAgent)?this.devices.tablet:this.devices.desktop}},{key:"_getResolution",value:function(){return this.resolutions[window.screen?window.screen.width+"x"+window.screen.height:"undefined"]}},{key:"URL",value:function(e){return this._atob(this.urls[e])}},{key:"_atob",value:function(e){if(window.atob)return window.atob(e);var t=String(e).replace(/[=]+$/,"");if(t.length%4==1)throw new InvalidCharacterError("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,i,s=0,a=0,n="";i=t.charAt(a++);~i&&(r=s%4?64*r+i:i,s++%4)?n+=String.fromCharCode(255&r>>(-2*s&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return output}},{key:"_btoa",value:function(e){if(window.btoa)return window.btoa(e);for(var t,r,i=String(e),s=0,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="";i.charAt(0|s)||(a="=",s%1);n+=a.charAt(63&t>>8-s%1*8)){if((r=i.charCodeAt(s+=.75))>255)return"";t=t<<8|r}return output}},{key:"ajax",value:function(e){var t=new XMLHttpRequest,r="",i="POST"===e.method.toUpperCase(),s="GET"===e.method.toUpperCase();if(!i)for(var a in e.data)r+=a+"="+e.data[a]+"&";s&&(e.url+="?"+r),t.open(e.method,e.url),t.onreadystatechange=function(){void 0!==e.callback&&4==t.readyState&&e.callback(200==t.status?t.response:t.statusText)},e.headers&&e.headers.length&&e.headers.forEach(function(e){t.setRequestHeader(e.name,e.value)}),t.send(i?e.data:r)}},{key:"reportView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"visit",i="brandflow"+e+"reportimg";for(var s in this.currentUtms)t+=s+"="+this.currentUtms[s]+"&";t+="worm="+this._generateHbaseWorm()+"&container="+this.container+"&p="+window.location.pathname,t+="&ts="+Date.now();var a=document.createElement("img");a.src=this.URL(r)+e+"/"+this._btoa(t)+"/a.jpg",a.id=i,document.body.insertBefore(a,document.body.childNodes[document.body.childNodes.length-1]),setTimeout(function(){var t=document.getElementById("brandflow"+e+"reportimg");document.getElementById(i).parentNode.removeChild(t)},200)}},{key:"reportPushNotificationView",value:function(){var e=this.getParameterByName(this.QUERY_PARAMS.pushnotification.hb);if(e){var t,r,i=this.getParameterByName(this.QUERY_PARAMS.pushnotification.ts),s=this.getParameterByName(this.QUERY_PARAMS.pushnotification.id),a=(JSON.parse(this.readUserData(this.TRACK.personal)||this.emptyObject),r={container:this.container,worm:this._generateHbaseWorm(),ts:Date.now()},_defineProperty(r,this.QUERY_PARAMS.pushnotification.ts,i),_defineProperty(r,"meta",[]),_defineProperty(r,"p",window.location.pathname),_defineProperty(r,"pushnotification",(t={},_defineProperty(t,this.HB.rowKey,e),_defineProperty(t,this.QUERY_PARAMS.pushnotification.ts,i),_defineProperty(t,this.QUERY_PARAMS.pushnotification.id,s),t)),r);this.reportEntity(this.URL("pushview"),a)}}},{key:"reportEntity",value:function(e,t){var r=JSON.parse(this.readUserData(this.TRACK.personal)||this.emptyObject),i=JSON.parse(this.readUserData(this.TRACK.utm)||this.emptyObject),s=!1;for(var a in i){for(var n in r)i[a][n]=r[n];+a==r[this.HB.timestamp]&&(s=!0),i[a][this.HB.utmTimestamp]=a,t.meta.push(i[a])}s||t.meta.unshift(r);var o={method:"POST",url:e,data:JSON.stringify(t),headers:[{name:"Content-type",value:"application/json"}],callback:function(){}};this.ajax(o)}},{key:"createModals",value:function(){var t=this,r=document.createElement("div");r.setAttribute("id",this.modalswrap),r.innerHTML=this.modalhtml.join(""),document.body.insertBefore(r,document.body.childNodes[0]);var i=setInterval(function(){if("undefined"!=typeof jQuery){e.jQueryLoadTime=Date.now()-+e.ts+"ms.";var r=jQuery("#"+t.modalswrap).children();r.on("show.bs.modal",function(t){e.noModalVisible=!1}),r.on("hide.bs.modal",function(t){e.noModalVisible=!0}),clearInterval(i)}Date.now()>+e.ts+5e3&&(e.jQueryLoadTime="Aborted after "+(Date.now()-+e.ts),e.warning("wait for jQuery while creating modals","Aborted after "+(Date.now()-+e.ts)),clearInterval(i))},50)}},{key:"createTriggers",value:function(e){e.forEach(this.createTrigger,this)}},{key:"createTrigger",value:function(e,t){new l(e,t).create()}},{key:"allowPushNotification",value:function(){var e={container:this.container,worm:this._generateHbaseWorm(),ts:Date.now(),p:window.location.pathname,meta:[],fcm:{id:BFNotifications.fcmInstanceId,path:""}};this.reportEntity(this.URL("pushsubscribeadd"),e)}}]),e}();[{k:"TRACK",v:e.get(),w:!1},{k:"UTMS",v:r.get(),w:!1},{k:"HB",v:i.get(),w:!1},{k:"QUERY_PARAMS",v:s.get(),w:!1},{k:"resolutions",v:n.get(),w:!1},{k:"devices",v:a.get(),w:!1},{k:"urls",v:t.get(),w:!1},{k:"intervals",v:[],w:!0},{k:"idles",v:[],w:!0},{k:"scrollings",v:[],w:!0},{k:"modalshtml",v:"",w:!0},{k:"modalswrap",v:"brandflow-modals-"+(""+Math.random()).replace(".",""),w:!0},{k:"MAXIMUM_UTM_TIME",v:5184e6,w:!0},{k:"MAXIMUM_TRACKED_AMOUNT",v:5,w:!0},{k:"noModalVisible",v:!0,w:!0},{k:"emptyObject",v:"{}",w:!1},{k:"emptyArray",v:"[]",w:!1},{k:"inactive",v:{},w:!0}].forEach(function(e){Object.defineProperty(d,e.k,{value:e.v,writable:e.w,enumerable:!0,configurable:!1})}),window.BF=d}();